-- /// Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- /// Setup
local plr = Players.LocalPlayer
local playerGui = plr:WaitForChild("PlayerGui")

local gui = Instance.new("ScreenGui")
gui.Name = "KeyboardSelector"
gui.ResetOnSpawn = false
gui.Parent = playerGui
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- /// Auto-scaling function
local function scaleValue(value)
    return value * (math.min(playerGui.AbsoluteSize.X, playerGui.AbsoluteSize.Y) / 1080)
end

-- /// Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, scaleValue(350), 0, scaleValue(400))
frame.Position = UDim2.new(0.5, -scaleValue(175), 1.5, 0)
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
frame.BorderSizePixel = 0
frame.Parent = gui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, scaleValue(12))
corner.Parent = frame

local outline = Instance.new("UIStroke")
outline.Thickness = 2
outline.Color = Color3.fromRGB(80, 0, 120)
outline.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
outline.Parent = frame

-- /// Header with gradient
local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, scaleValue(40))
header.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
header.BorderSizePixel = 0
header.Parent = frame

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, scaleValue(12))
headerCorner.Parent = header

local headerGradient = Instance.new("UIGradient")
headerGradient.Rotation = 90
headerGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(60, 0, 90)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(40, 0, 60))
}
headerGradient.Parent = header

-- /// Title with Fantasy font
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 1, 0)
title.BackgroundTransparency = 1
title.Text = "SELECT KEYBOARD"
title.Font = Enum.Font.Fantasy
title.TextSize = scaleValue(18)
title.TextColor3 = Color3.fromRGB(220, 220, 220)
title.Parent = header

-- /// Close Button
local closeBtn = Instance.new("ImageButton")
closeBtn.Size = UDim2.new(0, scaleValue(24), 0, scaleValue(24))
closeBtn.Position = UDim2.new(1, -scaleValue(32), 0, scaleValue(8))
closeBtn.BackgroundTransparency = 1
closeBtn.Image = "rbxassetid://3926305904"
closeBtn.ImageRectOffset = Vector2.new(924, 724)
closeBtn.ImageRectSize = Vector2.new(36, 36)
closeBtn.ImageColor3 = Color3.fromRGB(180, 180, 180)
closeBtn.Parent = header

closeBtn.MouseEnter:Connect(function()
    TweenService:Create(closeBtn, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        ImageColor3 = Color3.fromRGB(220, 100, 220)
    }):Play()
end)

closeBtn.MouseLeave:Connect(function()
    TweenService:Create(closeBtn, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        ImageColor3 = Color3.fromRGB(180, 180, 180)
    }):Play()
end)

closeBtn.MouseButton1Click:Connect(function()
    TweenService:Create(frame, TweenInfo.new(0.6, Enum.EasingStyle.Quint, Enum.EasingDirection.In), {
        Position = UDim2.new(0.5, -scaleValue(175), 1.5, 0)
    }):Play()
    task.wait(0.65)
    gui:Destroy()
end)

-- /// Button container with scrolling
local buttonContainer = Instance.new("ScrollingFrame")
buttonContainer.Size = UDim2.new(1, 0, 1, -scaleValue(50))
buttonContainer.Position = UDim2.new(0, 0, 0, scaleValue(50))
buttonContainer.BackgroundTransparency = 1
buttonContainer.BorderSizePixel = 0
buttonContainer.ScrollBarThickness = scaleValue(4)
buttonContainer.ScrollBarImageColor3 = Color3.fromRGB(80, 0, 120)
buttonContainer.CanvasSize = UDim2.new(0, 0, 0, scaleValue(500))
buttonContainer.AutomaticCanvasSize = Enum.AutomaticSize.Y
buttonContainer.Parent = frame

local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Padding = UDim.new(0, scaleValue(10))
uiListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder
uiListLayout.Parent = buttonContainer

-- /// Button creation function
local function createButton(name, layoutOrder, func)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.9, 0, 0, scaleValue(50))
    button.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    button.AutoButtonColor = false
    button.Text = ""
    button.LayoutOrder = layoutOrder
    button.Parent = buttonContainer

    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, scaleValue(8))
    btnCorner.Parent = button

    local btnStroke = Instance.new("UIStroke")
    btnStroke.Thickness = 1
    btnStroke.Color = Color3.fromRGB(60, 0, 90)
    btnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    btnStroke.Parent = button

    -- /// Button text with Fantasy font
    local buttonTitle = Instance.new("TextLabel")
    buttonTitle.Size = UDim2.new(1, 0, 1, 0)
    buttonTitle.BackgroundTransparency = 1
    buttonTitle.Text = name
    buttonTitle.Font = Enum.Font.Fantasy
    buttonTitle.TextSize = scaleValue(16)
    buttonTitle.TextColor3 = Color3.fromRGB(220, 220, 220)
    buttonTitle.Parent = button

    local buttonHighlight = Instance.new("Frame")
    buttonHighlight.Size = UDim2.new(1, 0, 1, 0)
    buttonHighlight.BackgroundColor3 = Color3.fromRGB(80, 0, 120)
    buttonHighlight.BackgroundTransparency = 0.9
    buttonHighlight.BorderSizePixel = 0
    buttonHighlight.ZIndex = -1
    buttonHighlight.Parent = button

    local highlightCorner = Instance.new("UICorner")
    highlightCorner.CornerRadius = UDim.new(0, scaleValue(8))
    highlightCorner.Parent = buttonHighlight

    -- /// Hover effects
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        }):Play()
        TweenService:Create(btnStroke, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Color = Color3.fromRGB(120, 0, 180)
        }):Play()
        TweenService:Create(buttonHighlight, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.7
        }):Play()
    end)

    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        }):Play()
        TweenService:Create(btnStroke, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            Color = Color3.fromRGB(60, 0, 90)
        }):Play()
        TweenService:Create(buttonHighlight, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.9
        }):Play()
    end)

    -- /// Click effect
    button.MouseButton1Down:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        }):Play()
        TweenService:Create(buttonHighlight, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.5
        }):Play()
    end)

    button.MouseButton1Up:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        }):Play()
        TweenService:Create(buttonHighlight, TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.7
        }):Play()
    end)

    button.MouseButton1Click:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundColor3 = Color3.fromRGB(30, 30, 30),
            Size = UDim2.new(0.85, 0, 0, scaleValue(50))
        }):Play()
        TweenService:Create(buttonHighlight, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.8
        }):Play()
        
        -- /// Animate all buttons fading out
        for _, child in ipairs(buttonContainer:GetChildren()) do
            if child:IsA("TextButton") then
                TweenService:Create(child, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                    BackgroundTransparency = 1,
                    TextTransparency = 1
                }):Play()
            end
        end
        
        -- /// Slide out and execute
        TweenService:Create(frame, TweenInfo.new(0.6, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
            Position = UDim2.new(0.5, -scaleValue(175), -0.5, 0)
        }):Play()
        task.wait(0.65)
        func()
        gui:Destroy()
    end)
end

-- /// Create keyboard buttons
createButton("Byte Keyboard", 1, function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Something478/ScriptLoader/refs/heads/main/ByteKeyboard.lua"))()
end)

createButton("Kilobyte Keyboard", 2, function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Something478/ScriptLoader/refs/heads/main/KilobyteKeyboard.lua"))()
end)

createButton("Delta Keyboard", 3, function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Something478/ScriptLoader/refs/heads/main/DeltaKeyboard.lua"))()
end)

createButton("Virtual Keyboard", 4, function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/ltseverydayyou/uuuuuuu/refs/heads/main/VirtualKeyboard.lua"))()
end)

createButton("Mob Keyboard", 5, function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/advxzivhsjjdhxhsidifvsh/mobkeyboard/main/main.txt", true))()
end)

-- /// Spawn Animation
TweenService:Create(frame, TweenInfo.new(0.8, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
    Position = UDim2.new(0.5, -scaleValue(175), 0.5, -scaleValue(200))
}):Play()

-- /// Auto-scale on screen resize
playerGui:GetPropertyChangedSignal("AbsoluteSize"):Connect(function()
    frame.Size = UDim2.new(0, scaleValue(350), 0, scaleValue(400))
    frame.Position = UDim2.new(0.5, -scaleValue(175), 0.5, -scaleValue(200))
    corner.CornerRadius = UDim.new(0, scaleValue(12))
    header.Size = UDim2.new(1, 0, 0, scaleValue(40))
    title.TextSize = scaleValue(18)
    closeBtn.Size = UDim2.new(0, scaleValue(24), 0, scaleValue(24))
    closeBtn.Position = UDim2.new(1, -scaleValue(32), 0, scaleValue(8))
    buttonContainer.Size = UDim2.new(1, 0, 1, -scaleValue(50))
    buttonContainer.Position = UDim2.new(0, 0, 0, scaleValue(50))
    buttonContainer.ScrollBarThickness = scaleValue(4)
    uiListLayout.Padding = UDim.new(0, scaleValue(10))
    
    for _, button in ipairs(buttonContainer:GetChildren()) do
        if button:IsA("TextButton") then
            button.Size = UDim2.new(0.9, 0, 0, scaleValue(50))
            button:FindFirstChildWhichIsA("UICorner").CornerRadius = UDim.new(0, scaleValue(8))
            button:FindFirstChildWhichIsA("TextLabel").TextSize = scaleValue(16)
        end
    end
end)